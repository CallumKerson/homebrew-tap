# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Athenaeum < Formula
  desc ""
  homepage "https://github.com/CallumKerson/Athenaeum"
  version "1.7.1"
  license "MIT"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/CallumKerson/Athenaeum/releases/download/v1.7.1/athenaeum_1.7.1_darwin_amd64.tar.gz"
      sha256 "9052d61524f0fe2cbb55650e80299e03e207408b63a28500faf9156aa520e0bb"

      def install
        bin.install "athenaeum"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/CallumKerson/Athenaeum/releases/download/v1.7.1/athenaeum_1.7.1_darwin_arm64.tar.gz"
      sha256 "67c40ccbca393de155331b510d3e76a8e72b3864b31fc2db7702fa4ced999267"

      def install
        bin.install "athenaeum"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/CallumKerson/Athenaeum/releases/download/v1.7.1/athenaeum_1.7.1_linux_amd64.tar.gz"
      sha256 "0e0290f3fd697c06fde92dede7d96fcd003d75bc10c1604a1b9b99a4a213e041"

      def install
        bin.install "athenaeum"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/CallumKerson/Athenaeum/releases/download/v1.7.1/athenaeum_1.7.1_linux_arm64.tar.gz"
      sha256 "3dd45bbcaf504836c46f3c1e0d951f989ea9d7fdd6e6b6bf2b9fbc49976f1b8c"

      def install
        bin.install "athenaeum"
      end
    end
  end

  def caveats
    <<~EOS
      ****************************************************************
      Below are services commands to run to manage the athenaeum service.
      If you wish to run the athenaeum at boot prefix these commands with sudo
      otherwise the service will run at login.
      To start the athenaeum service run:
        brew services start CallumKerson/homebrew-tap/athenaeum
      To stop the athenaeum service run:
        brew services stop CallumKerson/homebrew-tap/athenaeum
      To restart the athenaeum service run:
        brew services restart CallumKerson/homebrew-tap/athenaeum
      ****************************************************************
    EOS
  end

  service do
    run [opt_bin/"athenaeum", "run" ,"--config", etc/"athenaeum.yaml"]
    environment_variables ATHENAEUM_DB_ROOT: var/"athenaeum"
    keep_alive true
    error_log_path var/"log/athenaeum.log"
    log_path var/"log/athenaeum.log"
  end

  test do
    system "#{bin}/athenaeum --version"
  end
end
